<!DOCTYPE html>
<html>
<head>
    <title>BasarMapTries </title>
    <meta charset="utf-8"/>
    <link href="src/style.css" rel="stylesheet"/>
    <script src="src/jquery-1.9.1.min.js"></script>
    <script src="src/jquery-1.9.1.js"></script>
    <script src="src/bootstrap.js"></script>
    <script src="src/bootstrap.min.js"></script>
    <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
    <script src="src/leaflet.js"></script>
    <link href="src/leaflet.css" rel="stylesheet" />
    
    
    
</head>
<body>
<div id="map">
    <script>
        var map = L.map('map').setView([40.65147, 29.25663], 7);
        var basarLayer=new L.TileLayer("http://bms.basarsoft.com.tr/Service/api/v1/map/ProMap?accId=M6_gfCCQlEmJZi4fNWNN-g&appCode=xaNH2qyi7kqDUm3bjQvhfQ&x={x}&y={y}&z={z}", {
            attribution: "&copy; <a href='http://www.basarsoft.com.tr'>Başarsoft</a> contributors",
            maxZoom:18
        }).addTo(map);
        var ilcoord;
        var featureGroup = new L.FeatureGroup();
        var deneme;
        featureGroup.addTo(map);
        $('document').ready(function() {
        
            $("#SearchButton").on('click', function (e) {
                e.preventDefault();
                var x = $('#searchText').val();
                
                $.ajax({
                    url: '../api/Iller/GetAll2',
                    type: 'GET',
                    dataType: 'json',
                    data: { IlAdi: x },
                    success: function (data, textStatus, xhr) {
                        console.log(data);

                        ilcoord = data.Geo.coordinates;

                        //deneme = toGeoJSON(ilcoord);



                        //featureGroup.addLayer(ilcoord);
                        //featureGroup.addTo(map);
                        var yenicord=[];
                        for (var i = 0; i < data.Geo.coordinates.length; i++) {

                            for (var j = 0; j < data.Geo.coordinates[i].length; j++) {
                                var mPolygon = [];
                                for (var k = 0; k < data.Geo.coordinates[i][j].length; k++) {
                                    mPolygon.push(data.Geo.coordinates[i][j][k].slice(0));
                                }
                                yenicord.push(mPolygon.slice(0));
                            }
                            var nPolygon = L.multiPolygon(yenicord, {
                                color: "#fff"
                                
                                
                            });
                            nPolygon.addTo(featureGroup);

                        }


                    },
                    error: function (xhr, textStatus, errorThrown) {
                        console.log('Error lan Error' + xhr + errorThrown);
                    }
                    
                });
                
                
            });

            
            

           

        });



             
            
           
        
    </script>
</div>
<div id="search">

    <div class="box">
        
        <div class="container">
            <form id="search">
                <input type="text" id="searchText" />
                <input type="submit" id="SearchButton"  value="SearchButton" />
            </form>
        </div>
    
    </div>
    </div>
<!--<script type="text/javascript">
    
    //      document.querySelector('.searchbox [type="reset"]').addEventListener('click', function () {
           
    //      this.parentNode.querySelector('input').focus();
    //});
</script>-->
</body>
</html>
